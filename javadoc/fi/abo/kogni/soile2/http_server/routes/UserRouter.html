<!DOCTYPE HTML>
<html lang>
<head>
<!-- Generated by javadoc (17) on Thu May 15 12:57:50 UTC 2025 -->
<title>UserRouter (soile.backend 1.0.0-SNAPSHOT API)</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta name="dc.created" content="2025-05-15">
<meta name="description" content="declaration: package: fi.abo.kogni.soile2.http_server.routes, class: UserRouter">
<meta name="generator" content="javadoc/ClassWriterImpl">
<link rel="stylesheet" type="text/css" href="../../../../../../stylesheet.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../../../../script-dir/jquery-ui.min.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../../../../jquery-ui.overrides.css" title="Style">
<script type="text/javascript" src="../../../../../../script.js"></script>
<script type="text/javascript" src="../../../../../../script-dir/jquery-3.7.1.min.js"></script>
<script type="text/javascript" src="../../../../../../script-dir/jquery-ui.min.js"></script>
</head>
<body class="class-declaration-page">
<script type="text/javascript">var evenRowColor = "even-row-color";
var oddRowColor = "odd-row-color";
var tableTab = "table-tab";
var activeTableTab = "active-table-tab";
var pathtoroot = "../../../../../../";
loadScripts(document, 'script');</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<div class="flex-box">
<header role="banner" class="flex-header">
<nav role="navigation">
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="top-nav" id="navbar-top">
<div class="skip-nav"><a href="#skip-navbar-top" title="Skip navigation links">Skip navigation links</a></div>
<ul id="navbar-top-firstrow" class="nav-list" title="Navigation">
<li><a href="../../../../../../index.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="nav-bar-cell1-rev">Class</li>
<li><a href="class-use/UserRouter.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../../index-all.html">Index</a></li>
<li><a href="../../../../../../help-doc.html#class">Help</a></li>
</ul>
</div>
<div class="sub-nav">
<div>
<ul class="sub-nav-list">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#field-summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor-summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method-summary">Method</a></li>
</ul>
<ul class="sub-nav-list">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor-detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method-detail">Method</a></li>
</ul>
</div>
<div class="nav-list-search"><label for="search-input">SEARCH:</label>
<input type="text" id="search-input" value="search" disabled="disabled">
<input type="reset" id="reset-button" value="reset" disabled="disabled">
</div>
</div>
<!-- ========= END OF TOP NAVBAR ========= -->
<span class="skip-nav" id="skip-navbar-top"></span></nav>
</header>
<div class="flex-content">
<main role="main">
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="sub-title"><span class="package-label-in-type">Package</span>&nbsp;<a href="package-summary.html">fi.abo.kogni.soile2.http_server.routes</a></div>
<h1 title="Class UserRouter" class="title">Class UserRouter</h1>
</div>
<div class="inheritance" title="Inheritance Tree"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html" title="class or interface in java.lang" class="external-link">java.lang.Object</a>
<div class="inheritance"><a href="SoileRouter.html" title="class in fi.abo.kogni.soile2.http_server.routes">fi.abo.kogni.soile2.http_server.routes.SoileRouter</a>
<div class="inheritance">fi.abo.kogni.soile2.http_server.routes.UserRouter</div>
</div>
</div>
<section class="class-description" id="class-description">
<hr>
<div class="type-signature"><span class="modifiers">public class </span><span class="element-name type-name-label">UserRouter</span>
<span class="extends-implements">extends <a href="SoileRouter.html" title="class in fi.abo.kogni.soile2.http_server.routes">SoileRouter</a></span></div>
<div class="block">This class implements all routes under the "user" tag from the API.
 The names of the functions are equivalent to the operationIDs of the openAPI access points.</div>
<dl class="notes">
<dt>Author:</dt>
<dd>Thomas Pfau</dd>
</dl>
</section>
<section class="summary">
<ul class="summary-list">
<!-- =========== FIELD SUMMARY =========== -->
<li>
<section class="field-summary" id="field-summary">
<h2>Field Summary</h2>
<div class="inherited-list">
<h3 id="fields-inherited-from-class-fi.abo.kogni.soile2.http_server.routes.SoileRouter">Fields inherited from class&nbsp;fi.abo.kogni.soile2.http_server.routes.<a href="SoileRouter.html" title="class in fi.abo.kogni.soile2.http_server.routes">SoileRouter</a></h3>
<code><a href="SoileRouter.html#authorizationRertiever">authorizationRertiever</a>, <a href="SoileRouter.html#experimentAuth">experimentAuth</a>, <a href="SoileRouter.html#experimentIDAccessHandler">experimentIDAccessHandler</a>, <a href="SoileRouter.html#projectAuth">projectAuth</a>, <a href="SoileRouter.html#projectIDAccessHandler">projectIDAccessHandler</a>, <a href="SoileRouter.html#roleHandler">roleHandler</a>, <a href="SoileRouter.html#studyAuth">studyAuth</a>, <a href="SoileRouter.html#studyIDAccessHandler">studyIDAccessHandler</a>, <a href="SoileRouter.html#taskAuth">taskAuth</a>, <a href="SoileRouter.html#taskIDAccessHandler">taskIDAccessHandler</a></code></div>
</section>
</li>
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<li>
<section class="constructor-summary" id="constructor-summary">
<h2>Constructor Summary</h2>
<div class="caption"><span>Constructors</span></div>
<div class="summary-table two-column-summary">
<div class="table-header col-first">Constructor</div>
<div class="table-header col-last">Description</div>
<div class="col-constructor-name even-row-color"><code><a href="#%3Cinit%3E(fi.abo.kogni.soile2.http_server.auth.SoileAuthorization,io.vertx.core.Vertx,io.vertx.ext.mongo.MongoClient)" class="member-name-link">UserRouter</a><wbr>(<a href="../auth/SoileAuthorization.html" title="class in fi.abo.kogni.soile2.http_server.auth">SoileAuthorization</a>&nbsp;auth,
 io.vertx.core.Vertx&nbsp;vertx,
 io.vertx.ext.mongo.MongoClient&nbsp;client)</code></div>
<div class="col-last even-row-color">
<div class="block">Default constructor</div>
</div>
</div>
</section>
</li>
<!-- ========== METHOD SUMMARY =========== -->
<li>
<section class="method-summary" id="method-summary">
<h2>Method Summary</h2>
<div id="method-summary-table">
<div class="table-tabs" role="tablist" aria-orientation="horizontal"><button id="method-summary-table-tab0" role="tab" aria-selected="true" aria-controls="method-summary-table.tabpanel" tabindex="0" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table', 3)" class="active-table-tab">All Methods</button><button id="method-summary-table-tab2" role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table-tab2', 3)" class="table-tab">Instance Methods</button><button id="method-summary-table-tab4" role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table-tab4', 3)" class="table-tab">Concrete Methods</button></div>
<div id="method-summary-table.tabpanel" role="tabpanel" aria-labelledby="method-summary-table-tab0">
<div class="summary-table three-column-summary">
<div class="table-header col-first">Modifier and Type</div>
<div class="table-header col-second">Method</div>
<div class="table-header col-last">Description</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>protected io.vertx.core.Future&lt;<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Void.html" title="class or interface in java.lang" class="external-link">Void</a>&gt;</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#checkAccess(io.vertx.ext.auth.User,fi.abo.kogni.soile2.http_server.auth.SoileAuthorization.Roles,io.vertx.ext.auth.mongo.MongoAuthorization)" class="member-name-link">checkAccess</a><wbr>(io.vertx.ext.auth.User&nbsp;user,
 <a href="../auth/SoileAuthorization.Roles.html" title="enum class in fi.abo.kogni.soile2.http_server.auth">SoileAuthorization.Roles</a>&nbsp;requiredRole,
 io.vertx.ext.auth.mongo.MongoAuthorization&nbsp;authProvider)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Simplified wrapper for the more general checkAccess function</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>protected io.vertx.core.Future&lt;<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Void.html" title="class or interface in java.lang" class="external-link">Void</a>&gt;</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#checkAccess(io.vertx.ext.auth.User,java.lang.String,fi.abo.kogni.soile2.http_server.auth.SoileAuthorization.Roles,fi.abo.kogni.soile2.http_server.auth.SoileAuthorization.PermissionType,boolean,io.vertx.ext.auth.mongo.MongoAuthorization,fi.abo.kogni.soile2.http_server.auth.SoileIDBasedAuthorizationHandler)" class="member-name-link">checkAccess</a><wbr>(io.vertx.ext.auth.User&nbsp;user,
 <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;id,
 <a href="../auth/SoileAuthorization.Roles.html" title="enum class in fi.abo.kogni.soile2.http_server.auth">SoileAuthorization.Roles</a>&nbsp;requiredRole,
 <a href="../auth/SoileAuthorization.PermissionType.html" title="enum class in fi.abo.kogni.soile2.http_server.auth">SoileAuthorization.PermissionType</a>&nbsp;requiredPermission,
 boolean&nbsp;adminAllowed,
 io.vertx.ext.auth.mongo.MongoAuthorization&nbsp;authProvider,
 <a href="../auth/SoileIDBasedAuthorizationHandler.html" title="class in fi.abo.kogni.soile2.http_server.auth">SoileIDBasedAuthorizationHandler</a>&nbsp;IDAccessHandler)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Convenience function to check Access for a user to given resources</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>protected io.vertx.core.Future&lt;<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Void.html" title="class or interface in java.lang" class="external-link">Void</a>&gt;</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#checkSameUserOrAdmin(io.vertx.ext.auth.User,java.lang.String,io.vertx.ext.auth.mongo.MongoAuthorization)" class="member-name-link">checkSameUserOrAdmin</a><wbr>(io.vertx.ext.auth.User&nbsp;user,
 <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;modifiedUser,
 io.vertx.ext.auth.mongo.MongoAuthorization&nbsp;authProvider)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Convenience function that checks whether this is either the user itself, or an admin calling this command.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>protected io.vertx.core.Future&lt;<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Void.html" title="class or interface in java.lang" class="external-link">Void</a>&gt;</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#checkUserHasAllPermissions(io.vertx.ext.auth.User,io.vertx.core.json.JsonArray,io.vertx.ext.auth.mongo.MongoAuthorization,fi.abo.kogni.soile2.http_server.auth.SoileIDBasedAuthorizationHandler)" class="member-name-link">checkUserHasAllPermissions</a><wbr>(io.vertx.ext.auth.User&nbsp;user,
 io.vertx.core.json.JsonArray&nbsp;permissions,
 io.vertx.ext.auth.mongo.MongoAuthorization&nbsp;authProvider,
 <a href="../auth/SoileIDBasedAuthorizationHandler.html" title="class in fi.abo.kogni.soile2.http_server.auth">SoileIDBasedAuthorizationHandler</a>&nbsp;IDAccessHandler)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Check if a user has all permissions required for the given permissions array (the permissions array has object with a field target and for all of those 
 the user needs to have full permissions.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>void</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#createUser(io.vertx.ext.web.RoutingContext)" class="member-name-link">createUser</a><wbr>(io.vertx.ext.web.RoutingContext&nbsp;context)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Create a new user</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>void</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#getUserActiveProjects(io.vertx.ext.web.RoutingContext)" class="member-name-link">getUserActiveProjects</a><wbr>(io.vertx.ext.web.RoutingContext&nbsp;context)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Get the Active projects for the user in the context</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>void</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#getUserInfo(io.vertx.ext.web.RoutingContext)" class="member-name-link">getUserInfo</a><wbr>(io.vertx.ext.web.RoutingContext&nbsp;context)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Get the use userinfo</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>void</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#listUsers(io.vertx.ext.web.RoutingContext)" class="member-name-link">listUsers</a><wbr>(io.vertx.ext.web.RoutingContext&nbsp;context)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">List all users (accessible for Admins and Researchers, the latter only get the names)</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>void</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#permissionChange(io.vertx.ext.web.RoutingContext)" class="member-name-link">permissionChange</a><wbr>(io.vertx.ext.web.RoutingContext&nbsp;context)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Set the permissions of a specified user.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>void</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#permissionOrRoleRequest(io.vertx.ext.web.RoutingContext)" class="member-name-link">permissionOrRoleRequest</a><wbr>(io.vertx.ext.web.RoutingContext&nbsp;context)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Set the permissions of a specified user.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>void</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#registerUser(io.vertx.ext.web.RoutingContext)" class="member-name-link">registerUser</a><wbr>(io.vertx.ext.web.RoutingContext&nbsp;context)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Register a user according to the API command</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>void</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#removeUser(io.vertx.ext.web.RoutingContext)" class="member-name-link">removeUser</a><wbr>(io.vertx.ext.web.RoutingContext&nbsp;context)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Route for user deletion.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>void</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#setPassword(io.vertx.ext.web.RoutingContext)" class="member-name-link">setPassword</a><wbr>(io.vertx.ext.web.RoutingContext&nbsp;context)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">This allows setting the user information (except the password)</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>void</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#setRole(io.vertx.ext.web.RoutingContext)" class="member-name-link">setRole</a><wbr>(io.vertx.ext.web.RoutingContext&nbsp;context)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Set the Role of a specified user (only Admins are allowed to do this)</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>void</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#setUserInfo(io.vertx.ext.web.RoutingContext)" class="member-name-link">setUserInfo</a><wbr>(io.vertx.ext.web.RoutingContext&nbsp;context)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">This allows setting the user information (except the password)</div>
</div>
</div>
</div>
</div>
<div class="inherited-list">
<h3 id="methods-inherited-from-class-fi.abo.kogni.soile2.http_server.routes.SoileRouter">Methods inherited from class&nbsp;fi.abo.kogni.soile2.http_server.routes.<a href="SoileRouter.html" title="class in fi.abo.kogni.soile2.http_server.routes">SoileRouter</a></h3>
<code><a href="SoileRouter.html#getAuthForType(fi.abo.kogni.soile2.http_server.auth.SoileAuthorization.TargetElementType)">getAuthForType</a>, <a href="SoileRouter.html#getAuthForType(java.lang.String)">getAuthForType</a>, <a href="SoileRouter.html#getHandlerForType(fi.abo.kogni.soile2.http_server.auth.SoileAuthorization.TargetElementType)">getHandlerForType</a>, <a href="SoileRouter.html#getHandlerForType(java.lang.String)">getHandlerForType</a>, <a href="SoileRouter.html#handleError(java.lang.Throwable,io.vertx.ext.web.RoutingContext)">handleError</a>, <a href="SoileRouter.html#isTokenUser(io.vertx.ext.auth.User)">isTokenUser</a>, <a href="SoileRouter.html#normalizePath(java.lang.String)">normalizePath</a></code></div>
<div class="inherited-list">
<h3 id="methods-inherited-from-class-java.lang.Object">Methods inherited from class&nbsp;java.lang.<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html" title="class or interface in java.lang" class="external-link">Object</a></h3>
<code><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#clone()" title="class or interface in java.lang" class="external-link">clone</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#equals(java.lang.Object)" title="class or interface in java.lang" class="external-link">equals</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#finalize()" title="class or interface in java.lang" class="external-link">finalize</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#getClass()" title="class or interface in java.lang" class="external-link">getClass</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#hashCode()" title="class or interface in java.lang" class="external-link">hashCode</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#notify()" title="class or interface in java.lang" class="external-link">notify</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#notifyAll()" title="class or interface in java.lang" class="external-link">notifyAll</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#toString()" title="class or interface in java.lang" class="external-link">toString</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#wait()" title="class or interface in java.lang" class="external-link">wait</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#wait(long)" title="class or interface in java.lang" class="external-link">wait</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#wait(long,int)" title="class or interface in java.lang" class="external-link">wait</a></code></div>
</section>
</li>
</ul>
</section>
<section class="details">
<ul class="details-list">
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<li>
<section class="constructor-details" id="constructor-detail">
<h2>Constructor Details</h2>
<ul class="member-list">
<li>
<section class="detail" id="&lt;init&gt;(fi.abo.kogni.soile2.http_server.auth.SoileAuthorization,io.vertx.core.Vertx,io.vertx.ext.mongo.MongoClient)">
<h3>UserRouter</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="element-name">UserRouter</span><wbr><span class="parameters">(<a href="../auth/SoileAuthorization.html" title="class in fi.abo.kogni.soile2.http_server.auth">SoileAuthorization</a>&nbsp;auth,
 io.vertx.core.Vertx&nbsp;vertx,
 io.vertx.ext.mongo.MongoClient&nbsp;client)</span></div>
<div class="block">Default constructor</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>auth</code> - The <a href="../auth/SoileAuthorization.html" title="class in fi.abo.kogni.soile2.http_server.auth"><code>SoileAuthorization</code></a> for Auth checks</dd>
<dd><code>vertx</code> - The <code>Vertx</code> instance for communication</dd>
<dd><code>client</code> - The <code>MongoClient</code> for db access</dd>
</dl>
</section>
</li>
</ul>
</section>
</li>
<!-- ============ METHOD DETAIL ========== -->
<li>
<section class="method-details" id="method-detail">
<h2>Method Details</h2>
<ul class="member-list">
<li>
<section class="detail" id="listUsers(io.vertx.ext.web.RoutingContext)">
<h3>listUsers</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">listUsers</span><wbr><span class="parameters">(io.vertx.ext.web.RoutingContext&nbsp;context)</span></div>
<div class="block">List all users (accessible for Admins and Researchers, the latter only get the names)</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>context</code> - The <code>RoutingContext</code> containing the user to check access</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="registerUser(io.vertx.ext.web.RoutingContext)">
<h3>registerUser</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">registerUser</span><wbr><span class="parameters">(io.vertx.ext.web.RoutingContext&nbsp;context)</span></div>
<div class="block">Register a user according to the API command</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>context</code> - The <code>RoutingContext</code> to extract the USer info from</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="removeUser(io.vertx.ext.web.RoutingContext)">
<h3>removeUser</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">removeUser</span><wbr><span class="parameters">(io.vertx.ext.web.RoutingContext&nbsp;context)</span></div>
<div class="block">Route for user deletion. 
 TODO: If deleteFiles is false/unassigned report a unique id that can be used to reassociate data and allow deletion of the data.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>context</code> - the <code>RoutingContext</code> to extract the user from</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="setUserInfo(io.vertx.ext.web.RoutingContext)">
<h3>setUserInfo</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">setUserInfo</span><wbr><span class="parameters">(io.vertx.ext.web.RoutingContext&nbsp;context)</span></div>
<div class="block">This allows setting the user information (except the password)</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>context</code> - The <code>RoutingContext</code> to extract the user for which to set the given info</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="setPassword(io.vertx.ext.web.RoutingContext)">
<h3>setPassword</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">setPassword</span><wbr><span class="parameters">(io.vertx.ext.web.RoutingContext&nbsp;context)</span></div>
<div class="block">This allows setting the user information (except the password)</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>context</code> - The <code>RoutingContext</code> to get the user for which to set the password</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="setRole(io.vertx.ext.web.RoutingContext)">
<h3>setRole</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">setRole</span><wbr><span class="parameters">(io.vertx.ext.web.RoutingContext&nbsp;context)</span></div>
<div class="block">Set the Role of a specified user (only Admins are allowed to do this)</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>context</code> - The current <code>RoutingContext</code> (contains User and data to use)</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="permissionChange(io.vertx.ext.web.RoutingContext)">
<h3>permissionChange</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">permissionChange</span><wbr><span class="parameters">(io.vertx.ext.web.RoutingContext&nbsp;context)</span></div>
<div class="block">Set the permissions of a specified user.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>context</code> - The current <code>RoutingContext</code> (contains User and data to use)</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="permissionOrRoleRequest(io.vertx.ext.web.RoutingContext)">
<h3>permissionOrRoleRequest</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">permissionOrRoleRequest</span><wbr><span class="parameters">(io.vertx.ext.web.RoutingContext&nbsp;context)</span></div>
<div class="block">Set the permissions of a specified user.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>context</code> - The current <code>RoutingContext</code> (contains User and data to use)</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="getUserInfo(io.vertx.ext.web.RoutingContext)">
<h3>getUserInfo</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">getUserInfo</span><wbr><span class="parameters">(io.vertx.ext.web.RoutingContext&nbsp;context)</span></div>
<div class="block">Get the use userinfo</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>context</code> - The current <code>RoutingContext</code> (contains User and data to use)</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="getUserActiveProjects(io.vertx.ext.web.RoutingContext)">
<h3>getUserActiveProjects</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">getUserActiveProjects</span><wbr><span class="parameters">(io.vertx.ext.web.RoutingContext&nbsp;context)</span></div>
<div class="block">Get the Active projects for the user in the context</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>context</code> - The current <code>RoutingContext</code> (contains User and data to use)</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="createUser(io.vertx.ext.web.RoutingContext)">
<h3>createUser</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">createUser</span><wbr><span class="parameters">(io.vertx.ext.web.RoutingContext&nbsp;context)</span></div>
<div class="block">Create a new user</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>context</code> - The current <code>RoutingContext</code> (contains User and data to use)</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="checkAccess(io.vertx.ext.auth.User,java.lang.String,fi.abo.kogni.soile2.http_server.auth.SoileAuthorization.Roles,fi.abo.kogni.soile2.http_server.auth.SoileAuthorization.PermissionType,boolean,io.vertx.ext.auth.mongo.MongoAuthorization,fi.abo.kogni.soile2.http_server.auth.SoileIDBasedAuthorizationHandler)">
<h3>checkAccess</h3>
<div class="member-signature"><span class="modifiers">protected</span>&nbsp;<span class="return-type">io.vertx.core.Future&lt;<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Void.html" title="class or interface in java.lang" class="external-link">Void</a>&gt;</span>&nbsp;<span class="element-name">checkAccess</span><wbr><span class="parameters">(io.vertx.ext.auth.User&nbsp;user,
 <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;id,
 <a href="../auth/SoileAuthorization.Roles.html" title="enum class in fi.abo.kogni.soile2.http_server.auth">SoileAuthorization.Roles</a>&nbsp;requiredRole,
 <a href="../auth/SoileAuthorization.PermissionType.html" title="enum class in fi.abo.kogni.soile2.http_server.auth">SoileAuthorization.PermissionType</a>&nbsp;requiredPermission,
 boolean&nbsp;adminAllowed,
 io.vertx.ext.auth.mongo.MongoAuthorization&nbsp;authProvider,
 <a href="../auth/SoileIDBasedAuthorizationHandler.html" title="class in fi.abo.kogni.soile2.http_server.auth">SoileIDBasedAuthorizationHandler</a>&nbsp;IDAccessHandler)</span></div>
<div class="block">Convenience function to check Access for a user to given resources</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>user</code> - The user to check</dd>
<dd><code>id</code> - the target ID</dd>
<dd><code>requiredRole</code> - the Required roles for access</dd>
<dd><code>requiredPermission</code> - the required permission for the access</dd>
<dd><code>adminAllowed</code> - whether admin access is allowed</dd>
<dd><code>authProvider</code> - the <code>MongoAuthorization</code> to extract authorization</dd>
<dd><code>IDAccessHandler</code> - the Access handler</dd>
<dt>Returns:</dt>
<dd>A <code>Future</code> that is successfull if the user has access and fails if not.</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="checkAccess(io.vertx.ext.auth.User,fi.abo.kogni.soile2.http_server.auth.SoileAuthorization.Roles,io.vertx.ext.auth.mongo.MongoAuthorization)">
<h3>checkAccess</h3>
<div class="member-signature"><span class="modifiers">protected</span>&nbsp;<span class="return-type">io.vertx.core.Future&lt;<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Void.html" title="class or interface in java.lang" class="external-link">Void</a>&gt;</span>&nbsp;<span class="element-name">checkAccess</span><wbr><span class="parameters">(io.vertx.ext.auth.User&nbsp;user,
 <a href="../auth/SoileAuthorization.Roles.html" title="enum class in fi.abo.kogni.soile2.http_server.auth">SoileAuthorization.Roles</a>&nbsp;requiredRole,
 io.vertx.ext.auth.mongo.MongoAuthorization&nbsp;authProvider)</span></div>
<div class="block">Simplified wrapper for the more general checkAccess function</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>user</code> - the User to check</dd>
<dd><code>requiredRole</code> - the Role required</dd>
<dd><code>authProvider</code> - the <code>MongoAuthorization</code> for auth checks</dd>
<dt>Returns:</dt>
<dd>A <code>Future</code> that is successfull if the user has access and fails if not.</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="checkSameUserOrAdmin(io.vertx.ext.auth.User,java.lang.String,io.vertx.ext.auth.mongo.MongoAuthorization)">
<h3>checkSameUserOrAdmin</h3>
<div class="member-signature"><span class="modifiers">protected</span>&nbsp;<span class="return-type">io.vertx.core.Future&lt;<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Void.html" title="class or interface in java.lang" class="external-link">Void</a>&gt;</span>&nbsp;<span class="element-name">checkSameUserOrAdmin</span><wbr><span class="parameters">(io.vertx.ext.auth.User&nbsp;user,
 <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;modifiedUser,
 io.vertx.ext.auth.mongo.MongoAuthorization&nbsp;authProvider)</span></div>
<div class="block">Convenience function that checks whether this is either the user itself, or an admin calling this command.
 Used when user modifications are done (which is nly allowed by the user or an admin</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>user</code> - The current user</dd>
<dd><code>modifiedUser</code> - the username of the modified user</dd>
<dd><code>authProvider</code> - the <code>MongoAuthorization</code> for auth</dd>
<dt>Returns:</dt>
<dd>A <code>Future</code> that is successfull if the user has access and fails if not.</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="checkUserHasAllPermissions(io.vertx.ext.auth.User,io.vertx.core.json.JsonArray,io.vertx.ext.auth.mongo.MongoAuthorization,fi.abo.kogni.soile2.http_server.auth.SoileIDBasedAuthorizationHandler)">
<h3>checkUserHasAllPermissions</h3>
<div class="member-signature"><span class="modifiers">protected</span>&nbsp;<span class="return-type">io.vertx.core.Future&lt;<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Void.html" title="class or interface in java.lang" class="external-link">Void</a>&gt;</span>&nbsp;<span class="element-name">checkUserHasAllPermissions</span><wbr><span class="parameters">(io.vertx.ext.auth.User&nbsp;user,
 io.vertx.core.json.JsonArray&nbsp;permissions,
 io.vertx.ext.auth.mongo.MongoAuthorization&nbsp;authProvider,
 <a href="../auth/SoileIDBasedAuthorizationHandler.html" title="class in fi.abo.kogni.soile2.http_server.auth">SoileIDBasedAuthorizationHandler</a>&nbsp;IDAccessHandler)</span></div>
<div class="block">Check if a user has all permissions required for the given permissions array (the permissions array has object with a field target and for all of those 
 the user needs to have full permissions.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>user</code> - The user to check</dd>
<dd><code>permissions</code> - the permissions required</dd>
<dd><code>authProvider</code> - the auth provider that provides the authorizations to the user</dd>
<dd><code>IDAccessHandler</code> - the Access handler that can build the authorizations.</dd>
<dt>Returns:</dt>
<dd>a succeeded <code>Future</code> if authorizated or a failed future if not.</dd>
</dl>
</section>
</li>
</ul>
</section>
</li>
</ul>
</section>
<!-- ========= END OF CLASS DATA ========= -->
</main>
<footer role="contentinfo">
<hr>
<p class="legal-copy"><small>Copyright &#169; 2025. All rights reserved.</small></p>
</footer>
</div>
</div>
</body>
</html>
